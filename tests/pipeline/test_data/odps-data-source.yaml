apiVersion: core/v1
metadata:
  provider: 1557702098194904
  identifier: odps-data-source
  version: v1
spec:
  inputs:
    parameters:
    - name: tableName
      type: String
      desc: "表名"
    - name: partition
      type: String
      value: ""
      desc: "分区名"
    - name: __execution
      type: Map
      desc: "必选，执行环境"
  outputs:
    artifacts:
    - name: outputArtifact
      type: {DataSet: {locationType: MaxComputeTable}}
      required: true
      desc: "输出数据"
  execution:
    image: "registry.cn-shanghai.aliyuncs.com/kubeflow_demo/kf_odpscmd:studio0.6"
    command:
    - /usr/local/bin/prepare.sh
    args:
    - |-
     {
      "env": {
        "_PPC_MaxCompute": {{inputs.parameters.__execution}}
      },
      "outputs": {
        "{{outputs.artifacts.outputArtifact.path}}": {"type": "DataSet", "location": {"type": "MaxComputeTable", "table": "{{inputs.parameters.tableName}}", "partition": "{{inputs.parameters.partition}}"}}
        }
     }
